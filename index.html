<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <div id="counterSpace">
            <div id="playerSpace">
                <h1 class="title">Player Points</h1>
                <h2 id="playerPoints">0</h2>
            </div>
            <div id="computerSpace">
                <h1 class="title">Computer Points</h1>
                <h2 id="computerPoints">0</h2>
            </div>
        </div>
        <div id="buttonSpace">
            <button id="Rock">Rock</button>
            <button id="Paper">Paper</button>
            <button id="Scissors">Scissors</button>
        </div>
        <div id="roundSpace">
            <h1>Game Summary</h1>
        </div>
        <div id="resultSpace"></div>
    </body>
    <script>
        // Global variables
        let userWins = 0;
        let computerWins = 0;

        // First I'm going to create a function that returns a random integer between min and max (both included)
        function getRndInteger(min, max) {
            return Math.floor(Math.random() * (max - min + 1) ) + min;
        }
        
        // Next I'm going to create a function that converts the integer returned by 'getRndInteger' in a proper value for the game
        function computerPlay() {
            const num = getRndInteger(1,3);
            if (num === 1) {
                return "Rock";
            } else if (num === 2) {
                return "Paper";
            } else {
                return "Scissors";
            }
        }

        // This function declare a winner and reset the game
        function endGame(num) {
            // Select the resultSpace 'div' with a query
            const resultSpace = document.querySelector('#resultSpace');
            // Create new elements for the result of the game
            const resultTitle = document.createElement('h1');
            resultTitle.textContent = 'Game Finished';
            const gameResult = document.createElement('h2');
            const resetButton = document.createElement('button');
            resetButton.textContent = 'Try Again';
            resetButton.addEventListener('click', () => {
                location.reload();
            });
            
            if (num == 1) {
                gameResult.textContent = 'You WIN the game!!!';
            } else if (num == 2) {
                gameResult.textContent = 'You LOSE the game!!!';
            }

            // At last, append the childs (DOM)
            resultSpace.appendChild(resultTitle);
            resultSpace.appendChild(gameResult);
            resultSpace.appendChild(resetButton);
        }

        // Next I'm going to create a function that plays one round of the game. It has 2 inputs (user and computer elections). The
        // output is a string declaring the winner of the round
        function playRound(playerSelection) {
            // Lets generate computer election
            const computerSelection = computerPlay();
            // Select the roundSpace 'div' with a query
            const roundSpace = document.querySelector('#roundSpace');
            // Create a new 'div' for the result of the round
            const roundResult = document.createElement('div');
            roundResult.classList.add('roundResult');
            // Select player points text
            const playerPoints = document.querySelector('#playerPoints');
            // Select computer points text
            const computerPoints = document.querySelector('#computerPoints');

            if (playerSelection === computerSelection) {
                roundResult.textContent = 'Draw! Nobody wins';
            } else if (playerSelection === "Rock" && computerSelection === "Paper") {
                computerWins++;
                roundResult.textContent = 'You lose! Paper beats Rock';
                computerPoints.textContent = computerWins;
            } else if (playerSelection === "Rock" && computerSelection === "Scissors") {
                userWins++;
                roundResult.textContent = 'You win! Rock beats Scissors';
                playerPoints.textContent = userWins;
            } else if (playerSelection === "Paper" && computerSelection === "Scissors") {
                computerWins++;
                roundResult.textContent = 'You lose! Scissors beats Paper';
                computerPoints.textContent = computerWins;
            } else if (playerSelection === "Paper" && computerSelection === "Rock") {
                userWins++;
                roundResult.textContent = 'You win! Paper beats Rock';
                playerPoints.textContent = userWins;
            } else if (playerSelection === "Scissors" && computerSelection === "Paper") {
                userWins++;
                roundResult.textContent = 'You win! Scissors beats Paper';
                playerPoints.textContent = userWins;
            } else if (playerSelection === "Scissors" && computerSelection === "Rock") {
                computerWins++;
                roundResult.textContent = 'You lose! Rock beats Scissors';
                computerPoints.textContent = computerWins;
            }
            
            // At last, append the child (DOM)
            roundSpace.appendChild(roundResult);

            // If one player reaches 5 points, wins the game
            if (userWins == 5) {
                endGame(1);
            } else if (computerWins == 5) {
                endGame(2);
            }
        }
        
        // Add event listeners to the buttons created, calling the function to play a round on each click
        const buttons = document.querySelectorAll('button');
        buttons.forEach((button) => {
            button.addEventListener('click', () => {
                playRound(button.id);
            });
        });

    </script>
</html>